import{j as e}from"./query-Bq8WcfNt.js";import{L as U}from"./index-D_En5pY6.js";import{r as s,N as F,L as G}from"./vendor-CCJnzKah.js";import{H as q,ae as D,af as H,ag as O,P as z,d as V,S as W,e as J,f as X,h as K,X as Q}from"./ui-Cr9M8UbZ.js";import"./index-CGPpAcYX.js";const Z=()=>{const x=s.useRef(null),[d,u]=s.useState(!1);return s.useEffect(()=>{const g=new IntersectionObserver(([b])=>{b.isIntersecting&&u(!0)},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return x.current&&g.observe(x.current),()=>g.disconnect()},[]),{ref:x,isVisible:d}},ee=()=>{const[x,d]=s.useState(typeof window<"u"?window.innerWidth>=1024:!0);return s.useEffect(()=>{const u=()=>d(window.innerWidth>=1024);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),x},E={ENDED:0,PLAYING:1,PAUSED:2},L=()=>{const x=ee(),[d,u]=s.useState([]),[g,b]=s.useState(!0),[n,v]=s.useState(null),[S,j]=s.useState(-1),[m,w]=s.useState(!1),[p,c]=s.useState(!1),[C,R]=s.useState(!1),[f,_]=s.useState(!0),r=s.useRef(null),N=s.useRef(null);Z();const I=s.useRef([]),P=s.useRef(-1);if(s.useEffect(()=>{I.current=d},[d]),s.useEffect(()=>{P.current=S},[S]),!x)return e.jsx(F,{to:"/",replace:!0});s.useEffect(()=>{if(window.YT){R(!0);return}const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const a=document.getElementsByTagName("script")[0];return a.parentNode?.insertBefore(t,a),window.onYouTubeIframeAPIReady=()=>{R(!0)},()=>{window.onYouTubeIframeAPIReady=()=>{}}},[]);const k=s.useCallback(()=>{const t=I.current,a=P.current;if(t.length===0)return;const i=(a+1)%t.length,l=t[i];l?.videoId&&(r.current&&(r.current.loadVideoById(l.videoId),setTimeout(()=>{r.current&&r.current.playVideo()},200)),c(!0),v(l),j(i))},[]),A=s.useCallback(()=>{const t=I.current,a=P.current;if(t.length===0)return;const i=a<=0?t.length-1:a-1,l=t[i];l?.videoId&&(r.current&&(r.current.loadVideoById(l.videoId),setTimeout(()=>{r.current&&r.current.playVideo()},200)),c(!0),v(l),j(i))},[]),h=s.useRef(!1);s.useEffect(()=>{if(!C||h.current||!n||!N.current)return;h.current=!0;const t=n.videoId,a=N.current;a.innerHTML='<div id="youtube-player"></div>',r.current=new window.YT.Player("youtube-player",{videoId:t,playerVars:{autoplay:1,rel:0,modestbranding:1},events:{onReady:i=>{i.target.playVideo(),c(!0)},onStateChange:i=>{i.data===E.PLAYING?c(!0):i.data===E.PAUSED?c(!1):i.data===E.ENDED&&(c(!1),k())}}})},[C,n,k]),s.useEffect(()=>()=>{r.current&&(r.current.destroy(),r.current=null),h.current=!1},[]);const B=s.useCallback(()=>{r.current&&(p?r.current.pauseVideo():r.current.playVideo())},[p]);s.useEffect(()=>{(async()=>{const a="/site/";try{const M=(await(await fetch(`${a}data/playlist/ischoi.json`)).text()).replace(/,(\s*[}\]])/g,"$1"),Y=JSON.parse(M).items.map(o=>{let y="";return o.url.includes("youtu.be/")?y=o.url.split("youtu.be/")[1]?.split("?")[0]||"":o.url.includes("v=")&&(y=o.url.split("v=")[1]?.split("&")[0]||""),{artist:o.artist||"Unknown Artist",title:o.title||"Unknown Title",date:o.date||"",thumbnail:y?`https://img.youtube.com/vi/${y}/maxresdefault.jpg`:void 0,youtubeUrl:o.url,videoId:y}});u(Y)}catch(i){console.error("Failed to load playlists:",i)}finally{b(!1)}})()},[]);const T=(t,a)=>{t.videoId&&(r.current&&h.current&&(r.current.loadVideoById(t.videoId),setTimeout(()=>{r.current&&r.current.playVideo()},200)),v(t),j(a),w(!1),c(!0))},$=()=>{r.current&&(r.current.destroy(),r.current=null),h.current=!1,v(null),w(!1),c(!1)};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100",children:e.jsx("div",{className:"max-w-1480 mx-auto px-12 md:px-20",children:e.jsxs("div",{className:"flex items-center justify-between h-40 md:h-48",children:[e.jsxs(G,{to:"/",className:"flex items-center gap-6 px-10 py-6 bg-gray-100 hover:bg-primary hover:text-white text-gray-600 rounded-lg transition-all text-xs font-semibold",title:"FINDS Lab 홈으로",children:[e.jsx(q,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"FINDS Lab"})]}),e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{size:14,className:"text-primary"}),e.jsx("span",{className:"text-xs md:text-xs font-bold text-gray-900",children:"Playlist"}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:[d.length," tracks"]})]}),e.jsxs("button",{onClick:()=>_(!f),className:`flex items-center gap-4 px-10 py-5 rounded-full transition-all text-xs font-semibold border ${f?"bg-primary text-white border-primary":"bg-white text-gray-600 border-gray-200 hover:border-[#D6B14D] hover:text-[#D6B14D]"}`,title:f?"그리드 보기로 전환":"리스트 보기로 전환",children:[f?e.jsx(H,{size:12}):e.jsx(O,{size:12}),e.jsx("span",{children:f?"Grid":"List"})]})]}),e.jsx("div",{className:"w-60 sm:w-80"})]})})}),e.jsx("div",{className:`flex-1 max-w-1480 mx-auto w-full px-12 md:px-16 py-16 md:py-24 ${n?"pb-[200px] md:pb-[240px]":""}`,children:g?e.jsx("div",{className:"flex items-center justify-center py-48",children:e.jsx("div",{className:"w-24 h-24 border-2 border-primary/20 border-t-primary rounded-full animate-spin"})}):d.length>0?f?e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-[40px_1fr_1fr_100px] md:grid-cols-[48px_1fr_1fr_120px] gap-12 md:gap-16 px-16 md:px-24 py-12 md:py-14 bg-gray-50 border-b border-gray-100",children:[e.jsx("div",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-wider",children:"#"}),e.jsx("div",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Title"}),e.jsx("div",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Artist"}),e.jsx("div",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-wider text-right",children:"Date"})]}),e.jsx("div",{className:"divide-y divide-gray-50",children:d.map((t,a)=>e.jsxs("div",{onClick:()=>T(t,a),className:`grid grid-cols-[40px_1fr_1fr_100px] md:grid-cols-[48px_1fr_1fr_120px] gap-12 md:gap-16 px-16 md:px-24 py-12 md:py-14 cursor-pointer transition-all group ${n?.videoId===t.videoId?"bg-primary/5":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center",children:[n?.videoId===t.videoId?p?e.jsxs("div",{className:"flex items-center gap-[2px]",children:[e.jsx("div",{className:"w-[3px] h-10 bg-primary rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-[3px] h-14 bg-primary rounded-full animate-pulse",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-[3px] h-8 bg-primary rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}):e.jsx(z,{size:14,className:"text-primary"}):e.jsx("span",{className:"text-xs md:text-sm text-gray-400 group-hover:hidden",children:a+1}),n?.videoId!==t.videoId&&e.jsx(V,{size:14,className:"text-primary hidden group-hover:block"})]}),e.jsxs("div",{className:"flex items-center gap-12 min-w-0",children:[e.jsx("img",{src:t.thumbnail?.replace("maxresdefault","default"),alt:"",className:"w-36 h-36 md:w-40 md:h-40 object-cover rounded-md flex-shrink-0",loading:"lazy",decoding:"async",onError:i=>{const l=i.target;l.src.includes("maxresdefault")&&(l.src=l.src.replace("maxresdefault","hqdefault"))}}),e.jsx("span",{className:`text-xs md:text-sm font-semibold truncate ${n?.videoId===t.videoId?"text-primary":"text-gray-900"}`,children:t.title})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-xs md:text-sm text-gray-500 truncate",children:t.artist})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("span",{className:"text-[10px] md:text-xs text-gray-400",children:t.date})})]},a))})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-12 md:gap-16",children:d.map((t,a)=>e.jsxs("div",{onClick:()=>T(t,a),className:`bg-white border rounded-xl overflow-hidden hover:shadow-lg transition-all group cursor-pointer ${n?.videoId===t.videoId?"border-[#D6B14D] ring-2 ring-[#D6B14D]/20":"border-gray-100 hover:border-[#D6B14D]/30"}`,children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 overflow-hidden",children:[t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy",decoding:"async",onError:i=>{const l=i.target;l.src.includes("maxresdefault")&&(l.src=l.src.replace("maxresdefault","hqdefault"))}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/10 to-primary/5 flex items-center justify-center",children:e.jsx(D,{className:"w-24 h-24 text-primary/30"})}),n?.videoId===t.videoId&&e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:p?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-8 bg-white rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-12 bg-white rounded-full animate-pulse",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-6 bg-white rounded-full animate-pulse",style:{animationDelay:"300ms"}}),e.jsx("div",{className:"w-2 h-10 bg-white rounded-full animate-pulse",style:{animationDelay:"450ms"}})]}):e.jsx("div",{className:"w-40 h-40 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(z,{size:20,className:"text-white"})})})]}),e.jsxs("div",{className:"p-12 md:p-14",children:[e.jsx("p",{className:"text-xs md:text-xs text-gray-500 mb-4 truncate font-bold",children:t.artist}),e.jsx("h3",{className:"text-xs md:text-xs font-bold text-gray-900 group-hover:text-[#D6B14D] transition-colors line-clamp-2 leading-relaxed",children:t.title})]})]},a))}):e.jsxs("div",{className:"bg-white rounded-xl p-32 md:p-48 text-center",children:[e.jsx("div",{className:"w-48 h-48 md:w-56 md:h-56 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-16",children:e.jsx(D,{className:"w-24 h-24 md:w-28 md:h-28 text-gray-300"})}),e.jsx("p",{className:"text-sm md:text-base font-semibold text-gray-900 mb-6",children:"플레이리스트 준비 중"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"아직 등록된 영상이 없습니다."})]})}),n&&e.jsxs("div",{className:`fixed bottom-0 left-0 right-0 bg-gray-900 shadow-2xl z-50 transition-all duration-300 ${m?"h-[60px]":"h-auto"}`,children:[e.jsxs("div",{className:"flex items-center justify-between px-12 md:px-20 py-8 border-b border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-12 flex-1 min-w-0",children:[m&&e.jsx("img",{src:n.thumbnail?.replace("maxresdefault","default"),alt:n.title,className:"w-40 h-40 object-cover rounded-md"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-gray-400 text-[10px] md:text-xs truncate",children:n.artist}),e.jsx("h2",{className:"text-white font-semibold text-xs md:text-sm truncate",children:n.title})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("button",{onClick:A,className:"p-8 text-gray-400 hover:text-white transition-colors",title:"이전 곡",children:e.jsx(W,{size:18})}),e.jsx("button",{onClick:B,className:"p-8 text-gray-400 hover:text-white transition-colors",title:p?"일시정지":"재생",children:p?e.jsx(z,{size:18}):e.jsx(V,{size:18})}),e.jsx("button",{onClick:k,className:"p-8 text-gray-400 hover:text-white transition-colors",title:"다음 곡",children:e.jsx(J,{size:18})}),e.jsx("button",{onClick:()=>w(!m),className:"p-8 text-gray-400 hover:text-white transition-colors",title:m?"확대":"최소화",children:m?e.jsx(X,{size:18}):e.jsx(K,{size:18})}),e.jsx("button",{onClick:$,className:"p-8 text-gray-400 hover:text-red-400 transition-colors",title:"닫기",children:e.jsx(Q,{size:18})})]})]}),e.jsx("div",{ref:N,className:`${m?"h-0 overflow-hidden":"aspect-video max-h-[50vh]"} [&>div]:w-full [&>div]:h-full [&_iframe]:w-full [&_iframe]:h-full`})]})]})};s.memo(L);const ne=()=>e.jsx(U,{children:e.jsx(L,{})});export{ne as ArchivesPlaylist};
